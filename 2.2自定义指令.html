<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>自定义指令</title>
  <link href="./css/monokai-sublime.css" rel="stylesheet">
</head>

<body>
  <div id="app">
    <h3>自定义指令</h3>
    <p>指令是vue.js模板中常用的一项功能，带有v-前缀</p>
    <p>指令的职责就是当期表达式的值改变时，相应的将某些行为应用到DOM上</p>
    <h4>自定义指令的选项是由几个钩子函数组成的，每个都是可选的。</h4>
    <ul>
      <li>bind 只调用一次，指令第一次绑定到元素 时调用，用这个钩子函数可以定义一个在绑时执行一次的初始化动作．</li>
      <li>inserted 被绑定元素插入父节点时调用（父节点存在即可调用，不必存在于 document 中）</li>
      <li>update 被绑定元素所在的模板更新时调用，而不论绑定值是否变化。通过比较更新前后的绑定值，可以忽略不必要的模板更新。</li>
      <li>componentUpdated 被绑定元素所在模板完成一次更新周期时调用．</li>
      <li>unbind 只调用一次，指令与元素解绑时调</li>
    </ul>
    <input type="text" v-focus>
  </div>
  <pre>
    <code class="htmlReplace">
      <div id="app">
        <input type="text" v-focus>
      </div>
    </code>
  </pre>
  <pre>
    <code class="lang-javascript">
      // 全局组册
      Vue.directive('focus', {
        // 指令选项
      })
      new Vue({
        el: '#app',
        directives:{
          focus: {
            inserted(el) {
              console.log(el)
              el.focus()
            }
          }
        }
      })
    </code>
  </pre>
  <script src="./js/vue.2.5.16.min.js"></script>
  <script src="./js/highlight.pack.js"></script>

  <script>
    document.querySelectorAll('.htmlReplace').forEach((block) => {
      block.innerHTML = block.innerHTML.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;")
    });
    hljs.initHighlightingOnLoad();
    new Vue({
      el: '#app',
      directives: {
        focus: {
          inserted(el) {
            console.log(el)
            el.focus()
          }
        }
      }
    })
  </script>
</body>

</html>