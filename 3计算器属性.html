<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>计算器属性</title>
  <link href="./css/monokai-sublime.css" rel="stylesheet">
</head>

<body>
  <div id="app">
    <h3>计算器属性</h3>
    <p>模板内的表达式可用于简单的表达式，当其过长或者逻辑复杂时，会难以维护，可以使用计算器属性解决</p>
    <p>什么时候触发：只要其中任一数据变化，计算器属性就会重新执行，视图也会更新</p>
    <p>一个计算器属性可以有get和set方法，get用来获取，set用来设置，大多数情况不需要设置，如需要可设置set方法</p>
    <hr>
    <p>两个实用的小技巧：</p>
    <p>计算器属性可以依赖其他计算器属性</p>
    <p>计算器属性不仅可以依赖当前vue实例的数据，还可以依赖其他vue实例的数据</p>
    {{sum}}
    <button @click="addA">a-1</button>
    <button @click="addB(10,$event)">b-10</button>
    {{test}}
    <button @click="testSet">computed set</button>
  </div>
  <pre>
    <code class="htmlReplace">
      {{sum}}
      <button @click="addA">a-1</button>
      <button @click="addB(10,$event)">b-10</button>
      {{test}}
      <button @click="testSet">computed set</button>
    </code>
  </pre>
  <pre>
    <code class="lang-javascript">
      new Vue({
        el: '#app',
        data: {
          a: 0,
          b: 0,
          testNum: 0
        },
        computed: {
          sum() {
            return this.a + this.b
          },
          test: {
            get() {
              return this.testNum
            },
            set(newValue) {
              this.testNum = newValue
            }
          }
        },
        methods: {
          addA() {
            this.a++
          },
          addB(num, domEvent) {
            // console.log(e);
            console.log(domEvent);
            this.b += num
          },
          testSet() {
            this.test = 100
          }
        }
      })
    </code>
  </pre>
  <script src="./js/vue.2.5.16.min.js"></script>
  <script src="./js/highlight.pack.js"></script>

  <script>
    document.querySelectorAll('.htmlReplace').forEach((block) => {
      block.innerHTML = block.innerHTML.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;")
    });
    hljs.initHighlightingOnLoad();
    new Vue({
      el: '#app',
      data: {
        a: 0,
        b: 0,
        testNum: 0
      },
      computed: {
        sum() {
          return this.a + this.b
        },
        test: {
          get() {
            return this.testNum
          },
          set(newValue) {
            this.testNum = newValue
          }
        }
      },
      methods: {
        addA() {
          this.a++
        },
        addB(num, domEvent) {
          // console.log(e);
          console.log(domEvent);
          this.b += num
        },
        testSet() {
          this.test = 100
        }
      }
    })
  </script>
</body>

</html>